---
interface Props {
  title: string;
  description: string;
}

import '../styles/global.css';
import ThemeToggle from '../components/ThemeToggle.astro';
import MobileNav from '../components/MobileNav.astro';

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="keywords" content="–Ω–µ–π—Ä–æ—Ñ–æ—Ç–æ—Å–µ—Å—Å–∏—è, nano banana, –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è —Ñ–æ—Ç–æ, –ø—Ä–æ–º–ø—Ç—ã, ai —Ñ–æ—Ç–æ, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π" />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/og-image.jpg" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content="/og-image.jpg" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏",
        "description": "–ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –Ω–µ–π—Ä–æ—Ñ–æ—Ç–æ—Å–µ—Å—Å–∏—è–º —Å 100 –≥–æ—Ç–æ–≤—ã–º–∏ –ø—Ä–æ–º—Ç–∞–º–∏",
        "totalTime": "PT30S",
        "estimatedCost": {
          "@type": "MonetaryAmount",
          "currency": "RUB",
          "value": "21"
        },
        "tool": [
          {
            "@type": "HowToTool",
            "name": "Nano Banana AI –±–æ—Ç"
          }
        ],
        "step": [
          {
            "@type": "HowToStep",
            "name": "–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç",
            "text": "–û—Ç–∫—Ä–æ–π—Ç–µ @nanobananas_bot –≤ Telegram"
          },
          {
            "@type": "HowToStep",
            "name": "–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ",
            "text": "–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ—ë —Ñ–æ—Ç–æ –≤ –±–æ—Ç"
          },
          {
            "@type": "HowToStep",
            "name": "–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º—Ç",
            "text": "–í—ã–±–µ—Ä–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º—Ç –∏–∑ –≥–∞–π–¥–∞"
          },
          {
            "@type": "HowToStep",
            "name": "–ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
            "text": "–ß–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ"
          }
        ]
      }
    </script>
    
    <!-- Preload Fonts if local, otherwise system fonts are used -->
    
    <script is:inline>
        // Check for saved theme and apply immediately
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            const theme = savedTheme || systemTheme;
            
            document.documentElement.setAttribute('data-theme', theme);
            document.documentElement.classList.toggle('dark', theme === 'dark');
            
            // Add listener for system theme changes if no preference saved
            if (!savedTheme) {
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                    const newTheme = e.matches ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    document.documentElement.classList.toggle('dark', newTheme === 'dark');
                });
            }
        })();
    </script>
    
    <script is:inline>
        // Sidebar toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('desktop-sidebar');
            const mainContainer = document.getElementById('main-container');
            
            if (!toggleBtn || !sidebar || !mainContainer) return;
            
            let sidebarVisible = true;
            
            toggleBtn.addEventListener('click', function() {
                sidebarVisible = !sidebarVisible;
                
                if (sidebarVisible) {
                    // Show sidebar
                    sidebar.style.display = '';
                    mainContainer.style.gridTemplateColumns = '';
                    toggleBtn.style.marginLeft = ''; // Return to CSS class negative margin
                    toggleBtn.setAttribute('title', '–°–∫—Ä—ã—Ç—å –º–µ–Ω—é');
                } else {
                    // Hide sidebar
                    sidebar.style.display = 'none';
                    mainContainer.style.gridTemplateColumns = '1fr';
                    toggleBtn.style.marginLeft = '0'; // Reset margin when sidebar is hidden
                    toggleBtn.setAttribute('title', '–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é');
                }
            });
        });
    </script>
  </head>
  <body>
    <div class="min-h-screen flex flex-col">
        <header class="sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
            <div class="container flex h-14 items-center justify-between">
                <div class="flex items-center md:hidden mr-2">
                    <MobileNav />
                </div>
                <div class="mr-4 hidden md:flex">
                    <a class="mr-6 flex items-center space-x-2 font-bold hover:text-primary transition-colors" href="https://t.me/nanobananas_bot" target="_blank" rel="noopener noreferrer">
                        <span>üçå @nanobananas_bot</span>
                    </a>
                </div>
                <div class="flex items-center gap-2">
                   <!-- Header content (can be passed via slot or default) -->
                   <slot name="header-actions" />
                   <ThemeToggle />
                </div>
            </div>
        </header>

        <div class="flex-1">
            <div id="main-container" class="container flex-1 items-start md:grid md:grid-cols-[240px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[260px_minmax(0,1fr)] lg:gap-10 transition-all duration-300">
                <aside id="desktop-sidebar" class="fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block overflow-y-auto border-r pr-4 transition-all duration-300">
                    <slot name="sidebar" />
                </aside>
                <main id="main-content" class="relative py-6 lg:gap-10 lg:py-8">
                    <button id="sidebar-toggle" class="hidden md:flex items-center justify-center mb-4 w-8 h-8 rounded-md border border-border bg-background hover:bg-muted transition-colors sticky top-20 z-30 shadow-sm md:-ml-6 lg:-ml-8" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–µ–Ω—é" title="–°–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                        <svg id="sidebar-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                            <path d="M9 3v18"/>
                        </svg>
                    </button>
                    <slot />
                </main>
            </div>
        </div>
        
        <footer class="py-6 md:px-8 md:py-0 border-t">
            <div class="container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row">
                 <p class="text-center text-sm leading-loose text-muted-foreground md:text-left">
                    ¬© 2025 @nanobananas_bot. Built for creators.
                </p>
                <div class="flex items-center gap-4 text-sm text-muted-foreground">
                  <span>–°–æ–∑–¥–∞—Ç–µ–ª–∏:</span>
                  <a href="https://t.me/elisaffettaai" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors font-medium">–ï–ª–∏—Å–∞–≤–µ—Ç–∞</a>
                  <span>‚Ä¢</span>
                  <a href="https://t.me/neuromaximru" target="_blank" rel="noopener noreferrer" class="hover:text-primary transition-colors font-medium">–ú–∞–∫—Å–∏–º</a>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Scroll to Top Button -->
    <button id="scroll-to-top" class="fixed bottom-8 right-8 z-50 hidden items-center justify-center w-12 h-12 rounded-full bg-primary text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110" aria-label="–ù–∞–≤–µ—Ä—Ö">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m18 15-6-6-6 6"/>
      </svg>
    </button>
    
    <script is:inline>
      // Scroll to top functionality
      document.addEventListener('DOMContentLoaded', function() {
        const scrollBtn = document.getElementById('scroll-to-top');
        if (!scrollBtn) return;
        
        // Show/hide button based on scroll position
        window.addEventListener('scroll', function() {
          if (window.scrollY > 300) {
            scrollBtn.classList.remove('hidden');
            scrollBtn.classList.add('flex');
          } else {
            scrollBtn.classList.add('hidden');
            scrollBtn.classList.remove('flex');
          }
        });
        
        // Scroll to top on click
        scrollBtn.addEventListener('click', function() {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      });
    </script>
  </body>
</html>
