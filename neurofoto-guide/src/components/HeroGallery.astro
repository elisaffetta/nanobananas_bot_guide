---
const images = [
  '/images/results/prompt-98.jpg',  // women
  '/images/results/prompt-41.jpg',  // men
  '/images/results/prompt-71.jpg',  // kids
  '/images/results/prompt-17.jpg',  // women - NEW
  '/images/results/prompt-94.jpg',  // women
  '/images/results/prompt-50.jpg',  // men - NEW
  '/images/results/prompt-45.jpg',  // men
  '/images/results/prompt-84.jpg',  // kids - NEW
  '/images/results/prompt-100.jpg', // women
  '/images/results/prompt-54.jpg',  // men - NEW
  '/images/results/prompt-72.jpg',  // kids
  '/images/results/prompt-93.jpg',  // women - NEW
  '/images/results/prompt-96.jpg',  // women
  '/images/results/prompt-58.jpg',  // men - NEW
  '/images/results/prompt-51.jpg',  // men
  '/images/results/prompt-101.jpg', // women - NEW
  '/images/results/prompt-73.jpg',  // kids
  '/images/results/prompt-95.jpg',  // women - NEW
  '/images/results/prompt-99.jpg',  // women
  '/images/results/prompt-59.jpg',  // men - NEW
  '/images/results/prompt-97.jpg',  // women
];
---

<div class="gallery-wrapper">
  <div class="gallery-track">
    {/* –ü–µ—Ä–≤—ã–π –Ω–∞–±–æ—Ä */}
    {images.map((src) => (
      <div class="gallery-item">
        <img src={src} alt="–ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏" loading="lazy" />
        <div class="gallery-overlay">
          <span class="gallery-icon">üîç</span>
        </div>
      </div>
    ))}
    {/* –î—É–±–ª–∏–∫–∞—Ç –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */}
    {images.map((src) => (
      <div class="gallery-item">
        <img src={src} alt="–ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏" loading="lazy" />
        <div class="gallery-overlay">
          <span class="gallery-icon">üîç</span>
        </div>
      </div>
    ))}
  </div>
</div>

<script is:inline>
  (function() {
    function openModal(imageSrc) {
      const modal = document.createElement('div');
      modal.className = 'gallery-modal';
      Object.assign(modal.style, {
        position: 'fixed',
        inset: '0',
        zIndex: '9999',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        opacity: '0',
        transition: 'opacity 0.3s ease'
      });
      
      const overlay = document.createElement('div');
      Object.assign(overlay.style, {
        position: 'absolute',
        inset: '0',
        background: 'rgba(0, 0, 0, 0.85)',
        backdropFilter: 'blur(8px)',
        cursor: 'pointer'
      });
      
      const img = document.createElement('img');
      img.src = imageSrc;
      Object.assign(img.style, {
        maxWidth: 'min(600px, 90vw)', // –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä: –º–∞–∫—Å–∏–º—É–º 600px –∏–ª–∏ 90% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
        maxHeight: '70vh',            // –ù–µ –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É, –æ—Å—Ç–∞–≤–ª—è–µ–º –≤–æ–∑–¥—É—Ö
        objectFit: 'contain',
        borderRadius: '12px',
        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)',
        transform: 'scale(0.9)',
        transition: 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
        position: 'relative',
        zIndex: '10000',
        pointerEvents: 'none'
      });
      // –†–∞–∑—Ä–µ—à–∏–º –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª–∫—É, –∞ –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É - –∑–∞–∫—Ä—ã–≤–∞—Ç—å
      img.style.pointerEvents = 'auto';

      modal.appendChild(overlay);
      modal.appendChild(img);
      document.body.appendChild(modal);
      document.body.style.overflow = 'hidden';

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
      requestAnimationFrame(() => {
        modal.style.opacity = '1';
        img.style.transform = 'scale(1)';
      });

      const closeModal = () => {
        modal.style.opacity = '0';
        img.style.transform = 'scale(0.9)';
        setTimeout(() => {
          if (modal.parentNode) document.body.removeChild(modal);
          document.body.style.overflow = '';
        }, 300);
      };

      overlay.addEventListener('click', closeModal);
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Esc
      const escHandler = (e) => {
        if (e.key === 'Escape') {
          closeModal();
          document.removeEventListener('keydown', escHandler);
        }
      };
      document.addEventListener('keydown', escHandler);
    }

    document.addEventListener('DOMContentLoaded', () => {
      const items = document.querySelectorAll('.gallery-item');
      items.forEach(item => {
        item.addEventListener('click', (e) => {
          const img = item.querySelector('img');
          if (img && img.src) {
            openModal(img.src);
          }
        });
      });
    });
  })();
</script>

<style>
  .gallery-wrapper {
    width: 100%;
    max-width: 1024px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã (max-w-5xl) */
    margin: 0 auto;    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    overflow: hidden;
    position: relative;
    padding: 1.5rem 0;
    mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
  }

  .gallery-track {
    display: flex;
    gap: 1.5rem;
    width: max-content;
    animation: marquee 60s linear infinite;
    padding-left: 1.5rem; /* –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –º–∞—Å–∫–∏ */
  }

  /* –ü–∞—É–∑–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
  .gallery-wrapper:hover .gallery-track {
    animation-play-state: paused;
  }

  .gallery-item {
    flex-shrink: 0;
    width: 200px;  /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π */
    height: 140px; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π */
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255,255,255,0.1);
  }
  
  .gallery-item:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 12px 24px -10px rgba(0,0,0,0.2);
    z-index: 10;
    border-color: var(--primary);
  }

  .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .gallery-item:hover img {
    transform: scale(1.1);
  }

  .gallery-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .gallery-item:hover .gallery-overlay {
    opacity: 1;
  }

  .gallery-icon {
    font-size: 1.5rem;
    transform: scale(0.8);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  
  .gallery-item:hover .gallery-icon {
    transform: scale(1);
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @media (max-width: 768px) {
    .gallery-item {
      width: 160px;
      height: 110px;
    }
    .gallery-track {
      gap: 1rem;
      animation-duration: 40s;
    }
  }
</style>
